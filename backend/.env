# ════════════════════════════════════════════════════════════════════
#  AgentIQ v2 — Environment Configuration
#  Copy to .env and fill in your values. Never commit .env to git.
# ════════════════════════════════════════════════════════════════════

# ── App ──────────────────────────────────────────────────────────────
APP_NAME=AgentIQ
ENVIRONMENT=development          # development | production
APP_URL=http://localhost:3000
API_URL=http://localhost:8000
LOG_LEVEL=INFO                   # DEBUG | INFO | WARNING | ERROR

# ── AI — Groq (FREE tier) ────────────────────────────────────────────
# Get key: https://console.groq.com → API Keys → Create key
#
# Supports TWO naming conventions (use either — or both):
#   Short form  →  API_PROVIDER=groq    API_KEY=gsk_...
#   Explicit    →  GROQ_API_KEY=gsk_...
# If both are set, GROQ_API_KEY takes priority.
API_PROVIDER=groq
API_KEY=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
GROQ_API_KEY=                          # optional: explicit override
GROQ_MODEL=llama-3.3-70b-versatile
GROQ_MAX_TOKENS=4096
GROQ_MAX_TOOL_ITERATIONS=15

# ── Database — Neon PostgreSQL ────────────────────────────────────────
# Get from: https://neon.tech → New Project → Connection Details
# asyncpg URL  (used by FastAPI at runtime):
DATABASE_URL=postgresql+asyncpg://neondb_owner:npg_msU8inp1rhvS@ep-crimson-grass-aihsefaj-pooler.c-4.us-east-1.aws.neon.tech/neondb
# psycopg2 URL (used by Alembic migrations only):
DATABASE_URL_SYNC=postgresql://neondb_owner:npg_msU8inp1rhvS@ep-crimson-grass-aihsefaj-pooler.c-4.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require


# Connection pool — tuned for Neon free tier (10 connection limit)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=2
DB_POOL_RECYCLE=240
# ── Redis — Upstash ─────────────────────────]──────────────────────────
# Get from: https://upstash.com → Create Database → RES
REDIS_URL=rediss://default:AX9MAAIncDI2MGEwYzM4YmNjM2U0YzA5OGM5NGIxOTg5ODhjZjNkZnAyMzI1ODg@major-halibut-32588.upstash.io:6379
CELERY_BROKER_URL=rediss://default:AX9MAAIncDI2MGEwYzM4YmNjM2U0YzA5OGM5NGIxOTg5ODhjZjNkZnAyMzI1ODg@major-halibut-32588.upstash.io:6379
CELERY_RESULT_BACKEND=rediss://default:AX9MAAIncDI2MGEwYzM4YmNjM2U0YzA5OGM5NGIxOTg5ODhjZjNkZnAyMzI1ODg@major-halibut-32588.upstash.io:6379

# ── Auth / JWT ────────────────────────────────────────────────────────
# Generate: python3 -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=4e5da20ab23a36d082828634b814c54cd63b34a8271f4f323bdac33562c26738
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440   # 24 hours

# ── SMTP — Email Outreach ─────────────────────────────────────────────
# Gmail example (use App Password, not your real password):
#   SMTP_HOST=smtp.gmail.com  SMTP_PORT=587  SMTP_USE_TLS=false
# SendGrid example:
#   SMTP_HOST=smtp.sendgrid.net  SMTP_PORT=587  SMTP_USERNAME=apikey
# Mailgun example:
#   SMTP_HOST=smtp.mailgun.org  SMTP_PORT=587
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=false              # false = STARTTLS on 587 | true = SSL on 465
SMTP_USERNAME=mphotos158@gmail.com
SMTP_PASSWORD=jdlo zzdb cqwk wnoj
SMTP_FROM_EMAIL=mphotos158@gmail.com
SMTP_FROM_NAME=AgentIQ
SMTP_RATE_LIMIT=20              # emails per minute (global default)

# ── Billing — Stripe (optional) ───────────────────────────────────────
# Get from: https://dashboard.stripe.com → Developers → API keys
STRIPE_SECRET_KEY=sk_test_REPLACE
STRIPE_WEBHOOK_SECRET=whsec_REPLACE
STRIPE_PRICE_STARTER=price_REPLACE
STRIPE_PRICE_PRO=price_REPLACE
STRIPE_PRICE_ENTERPRISE=price_REPLACE

# ── Rate Limiting ─────────────────────────────────────────────────────
RATE_LIMIT_PER_MINUTE=60
MAX_CONCURRENT_JOBS_PER_ORG=3

# ── Worker ────────────────────────────────────────────────────────────
WORKER_COMMIT_BATCH_SIZE=10
DB_WORKER_POOL_SIZE=2
DB_WORKER_MAX_OVERFLOW=1

# ── Monitoring (optional) ─────────────────────────────────────────────
# Get from: https://sentry.io → New Project → Python
SENTRY_DSN=
